<div class="container-projeto">
  <div class="barra-compartilhar">
    <div class="container">
      <span class="baixar"><p>
                <img class="botao-icone" alt="Ícone de Projetos" src="../../../assets/ic_projetos.svg"/>
                &nbsp;Pagina de Projeto - baixar:&nbsp;&nbsp;&nbsp;
                <span class="links"><a filename="projeto.json" target="projeto.json" href="{{ configurationService.ApiUrl + 'projetos/' + PRONAC }}">json</a> | 
                <a filename="projeto.csv" target="projeto.csv" href="{{ configurationService.ApiUrl + 'projetos/' + PRONAC + '?format=csv' }}">csv</a> | 
                <a filename="projeto.xml" target="projeto.xml" href="{{ configurationService.ApiUrl + 'projetos/' + PRONAC + '?format=xml' }}">xml</a></span></p>
      </span>
      <div *ngIf="!carregandoDados" class="compartilhar"> 
      <p>Compartilhe:&nbsp;&nbsp;</p>
      <share-buttons class="withCount" 
                  [defaultStyle]="false"
                  [url]="url" 
                  [title]="'Projeto: ' + projeto.nome" 
                  [description]="'VERSALIC - Portal de Visualização do Sistema de Apoio às Leis de Incentivo à Cultura.'"
                  [stumbleUpOn]="false" [pinterest]="false" [tumblr]="false" [linkedIn]="false"
                  [showCount]="true" ></share-buttons>
    </div>
    </div>
  </div>
  <div *ngIf="!carregandoDados" class="container">
    <h1 id="titulo-projeto" class="pagina-titulo">
      {{ projeto.nome }}
    </h1>
  </div>  
  <div class="linha-pagina-titulo"></div>
  <div class="container">

    <div  *ngIf="!carregandoDados && projeto != undefined" class="row">
      <div class="pagina-infos col-sm-7">
        <div class="row">
          <div class="col-sm-3"><p class="pagina-infos-label">PRONAC: </p><p class="pagina-infos-valor">{{ projeto.PRONAC }}</p></div>
          <div class="col-sm-4 col-xs-6"><p class="pagina-infos-label">Segmento: </p><p class="pagina-infos-valor">{{ projeto.segmento }}</p></div>
          <div class="col-sm-5 col-xs-6"><p class="pagina-infos-label">Área: </p><p class="pagina-infos-valor">{{ projeto.area }}</p></div>
        </div>
        <div class="row">
          <div class="col-sm-3 col-xs-6"><p class="pagina-infos-label">Mecanismo: </p><p class="pagina-infos-valor">{{ projeto.mecanismo }}</p></div>
          <div class="col-sm-4 col-xs-6"><p class="pagina-infos-label">Enquadramento: </p><p class="pagina-infos-valor">{{ projeto.enquadramento }}</p></div>
          <div class="col-sm-5 col-xs-6"><p class="pagina-infos-label">Município/UF: </p><p class="pagina-infos-valor">{{ projeto.municipio }}, {{ projeto.UF }}</p></div>
          <div class="col-xs-6 hidden-sm hidden-lg hidden-md"><p class="pagina-infos-label">Ano do projeto: </p><p class="pagina-infos-valor">{{ dataFormatterService.formataAno(projeto.ano_projeto) }}</p></div>
        </div>
        <div class="row">
          <div class="col-sm-4 hidden-xs"><p class="pagina-infos-label">Ano do projeto: </p><p class="pagina-infos-valor">{{ dataFormatterService.formataAno(projeto.ano_projeto) }}</p></div>
          <div class="col-sm-4 col-xs-6"><p class="pagina-infos-label">Data término: </p><p class="pagina-infos-valor">{{ dataFormatterService.formataData(projeto.data_inicio) }}</p></div>
          <div class="col-sm-4 col-xs-6"><p class="pagina-infos-label">Data início: </p><p class="pagina-infos-valor">{{ dataFormatterService.formataData(projeto.data_inicio) }}</p></div>
        </div>
        <div class="row">
          <div class="col-sm-9" [ngClass]="{'texto-elipsado' : isProvidenciasEscondido }"><p class="pagina-infos-label">Situação: </p><p class="pagina-infos-valor">{{ projeto.situacao }}</p></div>
          <div class="col-sm-3 toggle">
            <a (click)="isProvidenciasEscondido = !isProvidenciasEscondido" class="paginas-infos-valor hidden-sm visible-inline-xs visible-inline-lg">{{ isProvidenciasEscondido ? '&#x25B8; Providências' : '&#9652; Providências' }}</a>
            <a (click)="isProvidenciasEscondido = !isProvidenciasEscondido" class="paginas-infos-valor visible-inline-sm hidden-xs hidden-lg hidden-md">{{ isProvidenciasEscondido ? '&#x25B8;Providências' : '&#9652;Providências' }}</a>
          </div>
          <div *ngIf="!isProvidenciasEscondido" class="col-sm-12"><p class="pagina-infos-label">Providências: </p><p class="paginas-info-valor">{{ projeto.providencia }}</p></div>
        </div> 

        <div class="pagina-listas">
          <div class="row">
            <p class="pagina-subtitulo col-sm-12">Listas associadas</p>
            <div class="col-sm-6 col-xs-12 col-borda-dir">
              <div class="row">
                <div class="col-xs-7"><p class="pagina-infos-label">Distribuição: </p><p class="pagina-infos-valor">{{ obterLength('distribuicao') === 1 ? obterLength('distribuicao') + ' item.' : obterLength('distribuicao') + ' itens.' }}</p></div>
                <div class="col-xs-5 text-right"><button class=" btn btn-primary" (click)="mostrarModalDeDistribuicao();" [disabled]="obterLength('distribuicao') <= 0">Ver lista</button></div>
              </div>
              <div class="row">
                <div class="col-xs-7"><p class="pagina-infos-label">Divulgação: </p><p class="pagina-infos-valor">{{ obterLength('divulgacao') === 1 ? obterLength('divulgacao') + ' item.' : obterLength('divulgacao') + ' itens.' }}</p></div>
                <div class="col-xs-5 text-right"><button class="btn btn-primary" (click)="mostrarModalDeDivulgacao();" [disabled]="obterLength('divulgacao') <= 0">Ver lista</button></div>
              </div>
              <div class="row">
                <div class="col-xs-7"><p class="pagina-infos-label">Documentos anexos: </p><p class="pagina-infos-valor">{{ obterLength('documentos_anexados') === 1 ? obterLength('documentos_anexados') + ' item.' : obterLength('documentos_anexados') + ' itens.' }}</p></div>
                <div class="col-xs-5 text-right"><button class="btn btn-primary" (click)="mostrarModalDeDocumentosAnexos();" [disabled]="obterLength('documentos_anexados') <= 0">Ver lista</button></div>
              </div>
              <div class="row">
                <div class="col-xs-7"><p class="pagina-infos-label">Marcas anexas: </p><p class="pagina-infos-valor">{{ obterLength('marcas_anexadas') === 1 ? obterLength('marcas_anexadas') + ' item.' : obterLength('marcas_anexadas') + ' itens.' }}</p></div>
                <div class="col-xs-5 text-right"><button class="btn btn-primary" (click)="mostrarModalDeMarcasAnexas();" [disabled]="obterLength('marcas_anexadas') <= 0">Ver lista</button></div>
              </div>
              <div class="row">
                <div class="col-xs-7"><p class="pagina-infos-label">Deslocamentos: </p><p class="pagina-infos-valor">{{ obterLength('deslocamento') === 1 ? obterLength('deslocamento') + ' item.' : obterLength('deslocamento') + ' itens.' }}</p></div>
                <div class="col-xs-5 text-right"><button class=" btn btn-primary" (click)="mostrarModalDeDeslocamentos();" [disabled]="obterLength('deslocamento') <= 0">Ver lista</button></div>
              </div>
            </div>
            <div class="col-sm-6 col-xs-12">
              <div class="row">
                <div class="col-xs-7"><p class="pagina-infos-label">Prorrogação: </p><p class="pagina-infos-valor">{{ obterLength('prorrogacao') === 1 ? obterLength('prorrogacao') + ' item.' : obterLength('prorrogacao') + ' itens.' }}</p></div>
                <div class="col-xs-5 text-right"><button class="btn btn-primary" (click)="mostrarModalDeProrrogacao();" [disabled]="obterLength('prorrogacao') <= 0">Ver lista</button></div>
              </div>
              <div class="row">
                <div class="col-xs-7"><p class="pagina-infos-label">Relatório fisco: </p><p class="pagina-infos-valor">{{ obterLength('relatorio_fisco') === 1 ? obterLength('relatorio_fisco') + ' item.' : obterLength('relatorio_fisco') + ' itens.' }}</p></div>
                <div class="col-xs-5 text-right"><button class=" btn btn-primary" (click)="mostrarModalDeRelatorioFisico();" [disabled]="obterLength('relatorio_fisco') <= 0">Ver lista</button></div>
              </div>
              <div class="row">
                <div class="col-xs-7"><p class="pagina-infos-label">Certidões negativas: </p><p class="pagina-infos-valor">{{ obterLength('certidoes_negativas') === 1 ? obterLength('certidoes_negativas') + ' item.' : obterLength('certidoes_negativas') + ' itens.' }}</p></div>
                <div class="col-xs-5 text-right"><button class="btn btn-primary" (click)="mostrarModalDeCertidoesNegativas();" [disabled]="obterLength('certidoes_negativas') <= 0">Ver lista</button></div>
              </div>
              <div class="row">
                <div class="col-xs-7"><p class="pagina-infos-label">Readequações: </p><p class="pagina-infos-valor">{{ obterLength('readequacoes') === 1 ? obterLength('readequacoes') + ' item.' : obterLength('readequacoes') + ' itens.' }}</p></div>
                <div class="col-xs-5 text-right"><button class="btn btn-primary" (click)="mostrarModalDeReadequacoes();" [disabled]="obterLength('readequacoes') <= 0">Ver lista</button></div>
              </div>
            </div>
          </div>
        </div>  
      </div>
                  
      <div class="pagina-infos container-bloco-e-entidades col-sm-5">

        <!-- BLOCO DE VALORES =============================================-->
        <div class="pagina-bloco">
          <div class="row">
            <div class="col-xs-6"><p class="pagina-infos-label">Valor proposta: </p><p class="pagina-infos-valor" title="{{ dataFormatterService.formataValorEmReais(projeto.valor_proposta) }}">{{ dataFormatterService.formataValorEmReais(projeto.valor_proposta) }}</p></div>
            <div class="col-xs-6"><p class="pagina-infos-label">Valor projeto: </p><p class="pagina-infos-valor" title="{{ dataFormatterService.formataValorEmReais(projeto.valor_projeto) }}">{{ dataFormatterService.formataValorEmReais(projeto.valor_projeto) }}</p></div>
          </div> 
          <div class="row">
            <div class="col-xs-6"><p class="pagina-infos-label">Valor solicitado: </p><p class="pagina-infos-valor" title="{{ dataFormatterService.formataValorEmReais(projeto.valor_solicitado) }}">{{ dataFormatterService.formataValorEmReais(projeto.valor_solicitado) }}</p></div>
            <div class="col-xs-6"><p class="pagina-infos-label">Valor aprovado: </p><p class="pagina-infos-valor" title="{{ dataFormatterService.formataValorEmReais(projeto.valor_aprovado) }}">{{ dataFormatterService.formataValorEmReais(projeto.valor_aprovado) }}</p></div>
          </div> 
          <div class="row">
            <div class="col-xs-6"><p class="pagina-infos-label">Valor captado: </p><p class="pagina-infos-valor" title="{{ dataFormatterService.formataValorEmReais(projeto.valor_captado) }}">{{ dataFormatterService.formataValorEmReais(projeto.valor_captado) }}</p></div>
            <div class="col-xs-6"><p class="pagina-infos-label">Outras fontes: </p><p class="pagina-infos-valor" title="{{ dataFormatterService.formataValorEmReais(projeto.outras_fontes) }}">{{ dataFormatterService.formataValorEmReais(projeto.outras_fontes) }}</p></div>
          </div> 
        </div>

        <!-- PAGINAS DAS ENTIDADES E INFO RELACIONADAS =============================================-->
        <div class="pagina-infos pagina-entidades">
          <div class="row">
            <div class="col-xs-7"><p class="pagina-subtitulo">Proponente&nbsp;&nbsp;<img class="botao-icone" alt="Ícone de Proponentes" src="../../../assets/ic_proponentes.svg"/></p></div>
            <div class="col-xs-5 text-right botao-verde-claro"><button [routerLink]="['/proponentes', dataFormatterService.extraiIdDaUrl(projeto._links.proponente)]" type="button" class="btn btn-primary">Propontente</button></div>
            <div class="col-xs-7"><p class="pagina-infos-label">Proponente: </p><p class="pagina-infos-valor">{{ projeto.proponente }}</p></div>
            <div class="col-xs-5"><p class="pagina-infos-label">CPF/CNPJ: </p><p class="pagina-infos-valor">{{ dataFormatterService.formataCGCCPF(projeto.cgccpf) }}</p></div>
          </div>
          <div class="row">
            <div class="col-xs-7"><p class="pagina-subtitulo">Incentivadores&nbsp;&nbsp;<img class="botao-icone" alt="Ícone de Incentivadores" src="../../../assets/ic_incentivadores.svg"/></p></div>
            <div class="col-xs-5 text-right botao-verde-claro"><button [routerLink]="['/incentivadores']" [queryParams]="{'PRONAC': projeto.PRONAC}" type="button" class="btn btn-primary" [disabled]="obterLength('captacoes') <= 0">Incentivadores</button></div>
            <div class="col-xs-7"><p class="pagina-infos-label">Captações: </p><p class="pagina-infos-valor">{{ obterLength('captacoes') === 1 ? obterLength('captacoes') + ' item.' : obterLength('captacoes') + ' itens.' }}</p></div>
            <div class="col-xs-5 text-right"><button class="btn btn-primary" (click)="mostrarModalDeCaptacoes();" [disabled]="obterLength('captacoes') <= 0">Captações</button></div>
          </div>
          <div class="row">
            <div class="col-xs-7"><p class="pagina-subtitulo">Fornecedores&nbsp;&nbsp;<img class="botao-icone" alt="Ícone de Fornecedores" src="../../../assets/ic_fornecedores.svg"/></p></div>
            <div class="col-xs-5 text-right botao-verde-claro"><button [routerLink]="['/fornecedores']" [queryParams]="{'PRONAC': projeto.PRONAC}" type="button" class="btn btn-primary" [disabled]="obterLength('relacao_pagamentos') <= 0">Fornecedores</button></div>
            <div class="col-xs-7"><p class="pagina-infos-label">Relação pagamentos: </p><p class="pagina-infos-valor">{{ obterLength('relacao_pagamentos') === 1 ? obterLength('relacao_pagamentos') + ' item.' : obterLength('relacao_pagamentos') + ' itens.' }}</p></div>
            <div class="col-xs-5 text-right"><button class="btn btn-primary" (click)="mostrarModalDeRelacaoPagamentos();" [disabled]="obterLength('relacao_pagamentos') <= 0">Produtos</button></div>
          </div>
        </div>
      </div>
    </div>

    <div [ngStyle]="{ opacity: carregandoDados ? '0' : '1' }" class="container-abas row">
      <div class="scroller scroller-left"><i class="glyphicon glyphicon-chevron-left"></i></div>
      <div class="scroller scroller-right"><i class="glyphicon glyphicon-chevron-right"></i></div>
      <div class="text-center abas-texto">
        <ul class="nav nav-pills aba">
          <li role="presentation" [ngClass]="{'active': textoSelecionado === 'resumo'}"><a (click)="textoSelecionado = 'resumo'">Resumo</a></li>
          <li role="presentation" [ngClass]="{'active': textoSelecionado === 'etapa'}"><a (click)="textoSelecionado = 'etapa'">Etapa</a></li>
          <li role="presentation" [ngClass]="{'active': textoSelecionado === 'providencia'}"><a (click)="textoSelecionado = 'providencia'">Providência</a></li>
          <li role="presentation" [ngClass]="{'active': textoSelecionado === 'objetivos'}"><a (click)="textoSelecionado = 'objetivos'">Objetivos</a></li>
          <li role="presentation" [ngClass]="{'active': textoSelecionado === 'sinopse'}"><a (click)="textoSelecionado = 'sinopse'">Sinopse</a></li>
          <li role="presentation" [ngClass]="{'active': textoSelecionado === 'justificativa'}"><a (click)="textoSelecionado = 'justificativa'">Justificativa</a></li>
          <li role="presentation" [ngClass]="{'active': textoSelecionado === 'ficha_tecnica'}"><a (click)="textoSelecionado = 'ficha_tecnica'">Ficha Técnica</a></li>
          <li role="presentation" [ngClass]="{'active': textoSelecionado === 'especificacao_tecnica'}"><a (click)="textoSelecionado = 'especificacao_tecnica'">Especificação Técnica</a></li>
          <li role="presentation" [ngClass]="{'active': textoSelecionado === 'impacto_ambiental'}"><a (click)="textoSelecionado = 'impacto_ambiental'">Impacto Ambiental</a></li>
          <li role="presentation" [ngClass]="{'active': textoSelecionado === 'democratizacao'}"><a (click)="textoSelecionado = 'democratizacao'">Democratização</a></li>
          <li role="presentation" [ngClass]="{'active': textoSelecionado === 'acessibilidade'}"><a (click)="textoSelecionado = 'acessibilidade'">Acessibilidade</a></li>
        </ul>
      </div>
    </div>  
    <div *ngIf="!carregandoDados && projeto != undefined" class="pagina-textos">   
      <p>{{ dataFormatterService.verificaSeHaTexto(projeto[textoSelecionado]) }}</p>
    </div>
  </div>

  <!-- MODAL DE DISTRIBUIÇÃO ===================================================================-->
  <div  *ngIf="!carregandoDados && projeto != undefined">
    <div bsModal #modalDeDistribuicao="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="Modal de Distribuição" aria-hidden="true">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h4 class="modal-title pull-left">Distribuição do Projeto</h4>
            <button type="button" class="close pull-right" aria-label="Close" (click)="esconderModalDeDistribuicao()">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <div *ngFor="let distribuicao of projeto._embedded.distribuicao; let i = index;">
            <div class="modal-item texto-elipsado">
              <div *ngIf="i > 0" class="modal-divisor"></div>
              <div class="modal-item-titulo" title="{{ distribuicao.produto }}"><p>{{ distribuicao.produto }}</p></div>
                <div class="row row-dark">
                  <div class="col-sm-3 col-xs-6"><p class="modal-item-label">Segmento: </p><p class="modal-item-valor">{{ distribuicao.segmento }}</p></div>
                  <div class="col-sm-3 col-xs-6"><p class="modal-item-label">Área: </p><p class="modal-item-valor">{{ distribuicao.area }}</p></div>
                  <div class="col-sm-3 col-xs-12"><p class="modal-item-label">Localização: </p><p class="modal-item-valor">{{ dataFormatterService.verificaSeHaTexto(distribuicao.localizacao) }}</p></div>
                  <div class="col-sm-3 col-xs-12"><p class="modal-item-label">Posição da Logo: </p><p class="modal-item-valor">{{ distribuicao.posicao_logo }}</p></div>
                </div>
                <div class="row">
                  <div class="col-sm-3 col-xs-6"><p class="modal-item-label">Preço unitário normal: </p><p class="modal-item-valor">{{ dataFormatterService.formataValorEmReais(distribuicao.preco_unitario_normal) }}</p></div>
                  <div class="col-sm-3 col-xs-6"><p class="modal-item-label">Quantidade venda normal: </p><p class="modal-item-valor">{{ distribuicao.qtd_venda_normal }}</p></div>
                  <div class="col-sm-3 col-xs-6"><p class="modal-item-label">Preço unitário promocional: </p><p class="modal-item-valor">{{ dataFormatterService.formataValorEmReais(distribuicao.preco_unitario_promocional) }}</p></div>
                  <div class="col-sm-3 col-xs-6"><p class="modal-item-label">Qtd. venda promocional: </p><p class="modal-item-valor">{{ distribuicao.qtd_venda_promocional }}</p></div>
                </div>
                <div class="row row-dark">
                  <div class="col-sm-3 col-xs-6"><p class="modal-item-label">Quantidade do proponente: </p><p class="modal-item-valor">{{ distribuicao.qtd_proponente }}</p></div>
                  <div class="col-sm-3 col-xs-6"><p class="modal-item-label">Quantidade do patrocinador: </p><p class="modal-item-valor">{{ distribuicao.qtd_patrocinador }}</p></div>
                  <div class="col-sm-3 col-xs-6"><p class="modal-item-label">Quantidade produzida: </p><p class="modal-item-valor">{{ distribuicao.qtd_produzida }}</p></div>
                  <div class="col-sm-3 col-xs-6"><p class="modal-item-label">Quantidade de outros: </p><p class="modal-item-valor">{{ distribuicao.qtd_outros }}</p></div>
                </div>
                <div class="row">
                  <div class="col-sm-3 col-xs-6"><p class="modal-item-label">Receita normal: </p><p class="modal-item-valor">{{ distribuicao.receita_normal }}</p></div>
                  <div class="col-sm-3 col-xs-6"><p class="modal-item-label">Receita prevista: </p><p class="modal-item-valor">{{ distribuicao.receita_prevista }}</p></div>
                  <div class="col-sm-3 col-xs-6"><p class="modal-item-label">Receita projeto: </p><p class="modal-item-valor">{{ distribuicao.receita_pro }}</p></div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- MODAL DE DIVULGAÇÃO ===================================================================-->
  <div  *ngIf="!carregandoDados && projeto != undefined">
    <div bsModal #modalDeDivulgacao="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="Modal de Divulgação" aria-hidden="true">
      <div class="modal-dialog modal-md">
        <div class="modal-content">
          <div class="modal-header">
            <h4 class="modal-title pull-left">Divulgação do Projeto</h4>
            <button type="button" class="close pull-right" aria-label="Close" (click)="esconderModalDeDivulgacao()">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <div *ngFor="let divulgacao of projeto._embedded.divulgacao; let i = index;">
            <div class="modal-item texto-elipsado">
              <div *ngIf="i > 0" class="modal-divisor"></div>
              <div class="modal-item-titulo" title="{{ divulgacao.peca }}"><p>Peça: {{ divulgacao.peca }}</p></div>
                <div class="row">
                  <div class="col-xs-12"><p class="modal-item-label">Veículo: </p><p class="modal-item-valor">{{ divulgacao.veiculo }}</p></div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- MODAL DE DOCUMENTOS ANEXAS ===================================================================-->
  <div  *ngIf="!carregandoDados && projeto != undefined">
    <div bsModal #modalDeDocumentosAnexos="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="Modal de Documentos Anexos" aria-hidden="true">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h4 class="modal-title pull-left">Documentos Anexados ao Projeto</h4>
            <button type="button" class="close pull-right" aria-label="Close" (click)="esconderModalDeDocumentosAnexos()">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <div *ngFor="let documento of projeto._embedded.documentos_anexados; let i = index;">
            <div class="modal-item texto-elipsado">
              <div *ngIf="i > 0" class="modal-divisor"></div>
              <div class="modal-item-titulo" title="{{ documento.produto }}"><p>{{ documento.nome }}</p></div>
                <div class="row">
                  <div class="col-md-6 col-sm-12 col-xs-12"><p class="modal-item-label">Classificação: </p><p class="modal-item-valor">{{ dataFormatterService.verificaSeHaTexto(documento.classificacao) }}</p></div>
                  <div class="col-md-4 col-sm-8 col-xs-12"><p class="modal-item-label">Data: </p><p class="modal-item-valor">{{ dataFormatterService.formataDataSemHora(documento.data) }}</p></div>
                  <div class="col-md-2 col-sm-4 col-xs-12"><p class="modal-item-label">Link: </p><a class="modal-item-valor" href="{{ documento.link }}">Clique aqui.</a></div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- MODAL DE DESLOCAMENTOS ===================================================================-->
  <div  *ngIf="!carregandoDados && projeto != undefined">
    <div bsModal #modalDeDeslocamentos="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="Modal de Deslocamentos" aria-hidden="true">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h4 class="modal-title pull-left">Deslocamentos do Projeto</h4>
            <button type="button" class="close pull-right" aria-label="Close" (click)="esconderModalDeDeslocamentos()">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <div *ngFor="let deslocamento of projeto._embedded.deslocamento; let i = index;">
            <div class="modal-item texto-elipsado">
              <div *ngIf="i > 0" class="modal-divisor"></div>
              <div class="modal-item-titulo" title="{{ deslocamento.municipio_origem }} &#8594; {{ deslocamento.municipio_destino }}"><p>{{ deslocamento.municipio_origem }} &#8594; {{ deslocamento.municipio_destino }}</p></div>
                <div class="row">
                  <div class="col-md-5 col-sm-6 col-xs-12"><p class="modal-item-label">Origem: </p><p class="modal-item-valor">{{ deslocamento.municipio_origem }}, {{ deslocamento.uf_origem }}, {{ deslocamento.pais_origem }}</p></div>
                  <div class="col-md-5 col-sm-6 col-xs-12"><p class="modal-item-label">Destino: </p><p class="modal-item-valor">{{ deslocamento.municipio_destino }}, {{ deslocamento.uf_destino }}, {{ deslocamento.pais_destino }}</p></div>
                  <div class="col-md-2 col-sm-12 col-xs-12"><p class="modal-item-label">Quantidade: </p><p class="modal-item-valor">{{ deslocamento.quantidade > 1 ? deslocamento.quantidade + ' vezes.' : deslocamento.quantidade + ' vez.' }}</p></div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- MODAL DE MARCAS ANEXAS ===================================================================-->
  <div  *ngIf="!carregandoDados && projeto != undefined">
    <div bsModal #modalDeMarcasAnexas="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="Modal de Marcas Anexas" aria-hidden="true">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h4 class="modal-title pull-left">Marcas Anexadas ao Projeto</h4>
            <button type="button" class="close pull-right" aria-label="Close" (click)="esconderModalDeMarcasAnexas()">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <div *ngFor="let marca of projeto._embedded.marcas_anexadas; let i = index;">
            <div class="modal-item texto-elipsado">
              <div *ngIf="i > 0" class="modal-divisor"></div>
              <div class="modal-item-titulo" title="{{ marca.nome_arquivo }}"><p>{{ marca.nome_arquivo }}</p></div>
                <div class="row row-dark">
                  <div class="col-md-3 col-sm-6 col-xs-12"><p class="modal-item-label">Id do arquivo: </p><p class="modal-item-valor">{{ marca.id_arquivo }}</p></div> 
                  <div class="col-md-3 col-sm-5 col-xs-12"><p class="modal-item-label">Id documento: </p><p class="modal-item-valor">{{ marca.id_documento }}</p></div>
                  <div class="col-md-2 col-sm-4 col-xs-12"><p class="modal-item-label">Link: </p><a class="modal-item-valor" href="{{ marca.link }}">Clique aqui.</a></div>
                  <div class="col-md-4 col-sm-8 col-xs-12"><p class="modal-item-label">Data: </p><p class="modal-item-valor">{{ dataFormatterService.formataDataSemHora(marca.data_envio) }}</p></div>
                </div>
                <div class="row">
                  <div class="col-xs-12"><p class="modal-item-label">Descrição: </p><p class="modal-item-valor">{{ dataFormatterService.verificaSeHaTexto(marca.descricao) }}</p></div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- MODAL DE PRORROGAÇÕES ===================================================================-->
  <div  *ngIf="!carregandoDados && projeto != undefined">
    <div bsModal #modalDeProrrogacao="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="Modal de Prorrogações" aria-hidden="true">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h4 class="modal-title pull-left">Prorrogações do Projeto</h4>
            <button type="button" class="close pull-right" aria-label="Close" (click)="esconderModalDeProrrogacao()">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <div *ngFor="let prorrogacao of projeto._embedded.prorrogacao; let i = index;">
            <div class="modal-item texto-elipsado">
              <div *ngIf="i > 0" class="modal-divisor"></div>
              <div class="modal-item-titulo" title="{{ prorrogacao.usuario }}"><p>{{ prorrogacao.usuario }}</p></div>
                <div class="row row-dark">
                  <div class="col-sm-4 col-xs-12"><p class="modal-item-label">Data do Pedido: </p><p class="modal-item-valor">{{ dataFormatterService.formataDataSemHora(prorrogacao.data_pedido) }}</p></div>
                  <div class="col-sm-4 col-xs-12"><p class="modal-item-label">Data de Início: </p><p class="modal-item-valor">{{ dataFormatterService.formataDataSemHora(prorrogacao.data_inicio) }}</p></div>
                  <div class="col-sm-4 col-xs-12"><p class="modal-item-label">Data Final: </p><p class="modal-item-valor">{{ dataFormatterService.formataDataSemHora(prorrogacao.data_final) }}</p></div>
                </div>
                <div class="row">
                  <div class="col-lg-2 col-md-4 col-xs-12"><p class="modal-item-label">Atendimento: </p><p class="modal-item-valor">{{ prorrogacao.atendimento }}</p></div> 
                  <div class="col-lg-2 col-md-8 col-xs-12"><p class="modal-item-label">Estado: </p><p class="modal-item-valor">{{ prorrogacao.estado }}</p></div>
                  <div class="col-lg-8 col-md-12 col-xs-12"><p class="modal-item-label">Observação: </p><p class="modal-item-valor">{{ dataFormatterService.verificaSeHaTexto(prorrogacao.observacao) }}</p></div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- MODAL DE RELATÓRIOS FÍSICOS ===================================================================-->
  <div  *ngIf="!carregandoDados && projeto != undefined">
    <div bsModal #modalDeRelatorioFisico="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="Modal de Relatórios Físicos" aria-hidden="true">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h4 class="modal-title pull-left">Relatórios Físicos do Projeto</h4>
            <button type="button" class="close pull-right" aria-label="Close" (click)="esconderModalDeRelatorioFisico()">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <div *ngFor="let relatorio of projeto._embedded.relatorio_fisco; let i = index;">
            <div class="modal-item texto-elipsado">
              <div *ngIf="i > 0" class="modal-divisor"></div>
              <div class="modal-item-titulo" title="{{ relatorio.item }}"><p>{{ relatorio.item }}</p></div>
                <div class="row row-dark">
                  <div class="col-sm-3 col-xs-12"><p class="modal-item-label">Quantidade programada: </p><p class="modal-item-valor">{{ relatorio.qtd_programada }}</p></div>
                  <div class="col-sm-3 col-xs-6"><p class="modal-item-label">Valor programado: </p><p class="modal-item-valor">{{ dataFormatterService.formataValorEmReais(relatorio.valor_programado) }}</p></div>
                  <div class="col-sm-3 col-xs-6"><p class="modal-item-label">Valor executado: </p><p class="modal-item-valor">{{ dataFormatterService.formataValorEmReais(relatorio.valor_executado) }}</p></div>
                  <div class="col-sm-3 col-xs-12"><p class="modal-item-label">Percentagem executada: </p><p class="modal-item-valor">{{ dataFormatterService.formataPercentagem(relatorio.perc_executado) }}</p></div>
                </div>
                <div class="row row">
                  <div class="col-sm-2 col-xs-12"><p class="modal-item-label">Id da Planilha Etapa: </p><p class="modal-item-valor">{{ relatorio.id_planilha_etapa }}</p></div>
                  <div class="col-sm-4 col-xs-12"><p class="modal-item-label">Etapa: </p><p class="modal-item-valor">{{ relatorio.etapa }}</p></div>
                  <div class="col-sm-3 col-xs-12"><p class="modal-item-label">Unidade: </p><p class="modal-item-valor">{{ dataFormatterService.verificaSeHaTexto(relatorio.unidade) }}</p></div>
                  <div class="col-sm-3 col-xs-12"><p class="modal-item-label">Percentagem à executar: </p><p class="modal-item-valor">{{ dataFormatterService.formataPercentagem(relatorio.perc_a_executar) }}</p></div> 
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- MODAL DE CERTIDÃO NEGATIVA ===================================================================-->
  <div  *ngIf="!carregandoDados && projeto != undefined">
    <div bsModal #modalDeCertidoesNegativas="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="Modal de Certidão Negativa" aria-hidden="true">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h4 class="modal-title pull-left">Certidões Negativas do Projeto</h4>
            <button type="button" class="close pull-right" aria-label="Close" (click)="esconderModalDeCertidoesNegativas()">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <div *ngFor="let certidao of projeto._embedded.certidoes_negativas; let i = index;">
            <div class="modal-item texto-elipsado">
              <div *ngIf="i > 0" class="modal-divisor"></div>
              <div class="modal-item-titulo" title="{{ certidao.descricao }}"><p>{{ certidao.descricao }}</p></div>
                <div class="row">
                  <div class="col-sm-6 col-xs-12"><p class="modal-item-label">Situação: </p><p class="modal-item-valor">{{ certidao.situacao }}</p></div>
                  <div class="col-sm-3 col-xs-6"><p class="modal-item-label">Data de emissão: </p><p class="modal-item-valor">{{ dataFormatterService.formataData(certidao.data_emissao) }}</p></div>
                  <div class="col-sm-3 col-xs-6"><p class="modal-item-label">Data de validade: </p><p class="modal-item-valor">{{ dataFormatterService.formataData(certidao.data_validade) }}</p></div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- MODAL DE CAPTAÇÕES ===================================================================-->
  <div  *ngIf="!carregandoDados && projeto != undefined">
    <div bsModal #modalDeCaptacoes="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="Modal de Captações" aria-hidden="true">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h4 class="modal-title pull-left">Captações do Projeto</h4>
            <button type="button" class="close pull-right" aria-label="Close" (click)="esconderModalDeCaptacoes()">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <div *ngFor="let captacao of projeto._embedded.captacoes; let i = index;">
            <div class="modal-item texto-elipsado">
              <div *ngIf="i > 0" class="modal-divisor"></div>
              <div class="modal-item-titulo" title="{{ dataFormatterService.formataValorEmReais(captacao.valor) }}">
                    <p>{{ dataFormatterService.formataValorEmReais(captacao.valor) }}
                      <button (click)="esconderModalDeCaptacoes()" [routerLink]="['/incentivadores', dataFormatterService.extraiIdDaUrl(captacao._links.incentivador)]" 
                      type="button" class="btn btn-primary pull-right hidden-lg hidden-md"><img class="botao-icone" alt="Ícone de Incentivadores" src="../../../assets/ic_incentivadores_branco.svg"/>&nbsp;&nbsp;Incentivador</button></p> 
                  </div>
                <div class="row">
                  <div class="col-md-3 col-sm-3 col-xs-12"><p class="modal-item-label">Data do recibo: </p><p class="modal-item-valor">{{ dataFormatterService.formataData(captacao.data_recibo) }}</p></div>
                  <div class="col-md-7 col-sm-9 col-xs-12"><p class="modal-item-label">Nome do incentivador: </p><p class="modal-item-valor">{{ captacao.nome_doador }}</p></div>
                   <button (click)="esconderModalDeCaptacoes()" [routerLink]="['/incentivadores', dataFormatterService.extraiIdDaUrl(captacao._links.incentivador)]" 
                      type="button" class="btn btn-primary pull-right hidden-xs hidden-sm"><img class="botao-icone" alt="Ícone de Incentivadores" src="../../../assets/ic_incentivadores_branco.svg"/>&nbsp;&nbsp;Incentivador</button> 

                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- MODAL DE RELAÇÃO PAGAMENTOS ===================================================================-->
  <div  *ngIf="!carregandoDados && projeto != undefined">
    <div bsModal #modalDeRelacaoPagamentos="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="Modal de Relação Pagamentos" aria-hidden="true">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h4 class="modal-title pull-left">Relação Pagamentos</h4>
            <button type="button" class="close pull-right" aria-label="Close" (click)="esconderModalDeRelacaoPagamentos()">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <div *ngFor="let relacao of projeto._embedded.relacao_pagamentos; let i = index;">
            <div class="modal-item texto-elipsado">
              <div *ngIf="i > 0" class="modal-divisor"></div>
              <div class="modal-item-titulo" title="{{ relacao.nome }}"><p>{{ relacao.nome }}</p></div>
                <div class="row  row-dark">
                  <div class="col-md-6 col-sm-5 col-xs-12"><p class="modal-item-label">Nome do fornecedor: </p><p class="modal-item-valor">{{ relacao.nome_fornecedor }}</p></div>
                  <div class="col-md-4 col-sm-4 col-xs-12"><p class="modal-item-label">CPF/CNPJ: </p><p class="modal-item-valor">{{ dataFormatterService.formataCGCCPF(relacao.cgccpf) }}</p></div>
                  <div class="col-md-2 col-sm-3 col-xs-12 text-center">
                    <button (click)="esconderModalDeRelacaoPagamentos()" [routerLink]="['/fornecedores', dataFormatterService.extraiIdDaUrl(relacao._links.fornecedor)]" 
                            type="button" class="btn btn-primary"><img class="botao-icone" alt="Ícone de Fornecedores" src="../../../assets/ic_fornecedores_branco.svg"/>&nbsp;&nbsp;Fornecedor</button>
                  
                  </div>
                </div>  
                <div class="row">
                  <div class="col-sm-3 col-xs-12"><p class="modal-item-label">Valor do pagamento: </p><p class="modal-item-valor-destaque" title="{{ dataFormatterService.formataValorEmReais(relacao.valor_pagamento) }}">{{ dataFormatterService.formataValorEmReais(relacao.valor_pagamento) }}</p></div>
                  <div class="col-sm-4 col-xs-6"><p class="modal-item-label">Data aprovação: </p><p class="modal-item-valor">{{ dataFormatterService.formataData(relacao.data_aprovacao) }}</p></div>
                  <div class="col-sm-4 col-xs-6"><p class="modal-item-label">Data pagamento: </p><p class="modal-item-valor">{{ dataFormatterService.formataData(relacao.data_pagamento) }}</p></div>
                </div>
                <div class="row  row-dark">
                  <div class="col-xs-12"><p class="modal-item-label">Nome do arquivo: </p><p class="modal-item-valor" title="{{ relacao.nm_arquivo }}">{{ relacao.nm_arquivo }}</p></div>
                </div>  
                <div class="row">
                  <div class="col-xs-12 col-sm-6"><p class="modal-item-label">Tipo do documento: </p><p class="modal-item-valor" title="{{ relacao.tipo_documento}}">{{ relacao.tipo_documento}}</p></div>
                  <div class="col-xs-12 col-sm-6"><p class="modal-item-label">Forma de pagamento: </p><p class="modal-item-valor" title="{{ relacao.tipo_forma_pagamento }}">{{ relacao.tipo_forma_pagamento }}</p></div>
                </div> 
                <div class="row  row-dark">
                  <div class="col-xs-6"><p class="modal-item-label" title="Número do Comprovante">Número comprovante: </p><p class="modal-item-valor" title="{{ relacao.nr_comprovante }}">{{ relacao.nr_comprovante }}</p></div>
                  <div class="col-xs-6"><p class="modal-item-label" title="Número do Documennto de Pagamento">N. documento pagamento: </p><p class="modal-item-valor" title="{{ relacao.nr_documento_pagamento }}">{{ relacao.nr_documento_pagamento }}</p></div>
                </div> 
                <div class="row">
                  <div class="col-sm-2 col-xs-4"><p class="modal-item-label" title="Id do Arquivo">Id arquivo: </p><p class="modal-item-valor" title="{{ relacao.id_arquivo }}">{{ relacao.id_arquivo }}</p></div>  
                  <div class="col-sm-5 col-xs-8"><p class="modal-item-label" title="Id do Comprovante de Pagamento" >Id comprovante pagamento: </p><p class="modal-item-valor" title="{{ relacao.id_comprovante_pagamento }}">{{ relacao.id_comprovante_pagamento }}</p></div>
                  <div class="col-sm-5 col-xs-12"><p class="modal-item-label" title="Id da Planilha Eletrônica de Aprovação" >Id planilha eletrônica: </p><p class="modal-item-valor" title="{{ relacao.id_planilha_aprovacao }}">{{ relacao.id_planilha_aprovacao }}</p></div>
                </div>              
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- MODAL DE READEQUAÇÕES ===================================================================-->
  <div  *ngIf="!carregandoDados && projeto != undefined">
    <div bsModal #modalDeReadequacoes="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="Modal de Readequações" aria-hidden="true">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h4 class="modal-title pull-left">Readequações</h4>
            <button type="button" class="close pull-right" aria-label="Close" (click)="esconderModalDeReadequacoes()">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <div *ngFor="let readequacao of projeto._embedded.readequacoes; let i = index;">
            <div class="modal-item texto-elipsado">
              <div *ngIf="i > 0" class="modal-divisor"></div>
              <div class="modal-item-titulo" title="{{ readequacao.nome_arquivo }}"><p>{{ readequacao.nome_arquivo }}</p></div>
                <div class="row  row-dark">
                  <div class="col-md-6 col-sm-5 col-xs-12"><p class="modal-item-label">Nome do fornecedor: </p><p class="modal-item-valor">{{ readequacao.nome_fornecedor }}</p></div>
                  <div class="col-md-4 col-sm-4 col-xs-12"><p class="modal-item-label">CPF/CNPJ: </p><p class="modal-item-valor">{{ dataFormatterService.formataCGCCPF(readequacao.cgccpf) }}</p></div>
                </div>
                </div>  
                <div class="row">
                  <div class="col-sm-3 col-xs-12"><p class="modal-item-label">Valor do pagamento: </p><p class="modal-item-valor-destaque" title="{{ dataFormatterService.formataValorEmReais(readequacao.valor_pagamento) }}">{{ dataFormatterService.formataValorEmReais(readequacao.valor_pagamento) }}</p></div>
                  <div class="col-sm-4 col-xs-6"><p class="modal-item-label">Data aprovação: </p><p class="modal-item-valor">{{ dataFormatterService.formataData(readequacao.data_aprovacao) }}</p></div>
                  <div class="col-sm-4 col-xs-6"><p class="modal-item-label">Data pagamento: </p><p class="modal-item-valor">{{ dataFormatterService.formataData(readequacao.data_pagamento) }}</p></div>
                </div>
                <div class="row  row-dark">
                  <div class="col-xs-12"><p class="modal-item-label">Nome do arquivo: </p><p class="modal-item-valor" title="{{ readequacao.nm_arquivo }}">{{ readequacao.nm_arquivo }}</p></div>
                </div>  
                <div class="row">
                  <div class="col-xs-12 col-sm-6"><p class="modal-item-label">Tipo do documento: </p><p class="modal-item-valor" title="{{ readequacao.tipo_documento}}">{{ readequacao.tipo_documento}}</p></div>
                  <div class="col-xs-12 col-sm-6"><p class="modal-item-label">Forma de pagamento: </p><p class="modal-item-valor" title="{{ readequacao.tipo_forma_pagamento }}">{{ readequacao.tipo_forma_pagamento }}</p></div>
                </div> 
                <div class="row  row-dark">
                  <div class="col-xs-6"><p class="modal-item-label" title="Número do Comprovante">Número comprovante: </p><p class="modal-item-valor" title="{{ readequacao.nr_comprovante }}">{{ readequacao.nr_comprovante }}</p></div>
                  <div class="col-xs-6"><p class="modal-item-label" title="Número do Documennto de Pagamento">N. documento pagamento: </p><p class="modal-item-valor" title="{{ readequacao.nr_documento_pagamento }}">{{ readequacao.nr_documento_pagamento }}</p></div>
                </div> 
                <div class="row">
                  <div class="col-sm-2 col-xs-4"><p class="modal-item-label" title="Id do Arquivo">Id arquivo: </p><p class="modal-item-valor" title="{{ readequacao.id_arquivo }}">{{ readequacao.id_arquivo }}</p></div>  
                  <div class="col-sm-5 col-xs-8"><p class="modal-item-label" title="Id do Comprovante de Pagamento" >Id comprovante pagamento: </p><p class="modal-item-valor" title="{{ readequacao.id_comprovante_pagamento }}">{{ readequacao.id_comprovante_pagamento }}</p></div>
                  <div class="col-sm-5 col-xs-12"><p class="modal-item-label" title="Id da Planilha Eletrônica de Aprovação" >Id planilha eletrônica: </p><p class="modal-item-valor" title="{{ readequacao.id_planilha_aprovacao }}">{{ readequacao.id_planilha_aprovacao }}</p></div>
                </div>              
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

  <!-- ÍCONE DE CARREGAMENTO =====================================================-->
  <div *ngIf="carregandoDados" class="spinner">
    <sk-cube-grid [color]="'#226000'" [isRunning]="carregandoDados"></sk-cube-grid>
    <p>Carregando Projeto...</p>
  </div>
</div>